@(dinners: List[Dinner], allOrders: Map[ObjectId, List[Order]], orderForm: Form[Order])

@import helper._
@import helper.twitterBootstrap2._ 
@import java.util.Date

@implicitFieldConstructor = @{FieldConstructor(twitterBootstrapFieldConstructor.f)}

@main("Feed Me!") {
    
    @if(dinners.size > 0) {
    	@dinners.map { dinner =>
    		<div class="well">
                @if(dinner.dinner_time.getDate() == new Date().getDate()){
                    <h3>@dinner.name kl @dinner.dinner_time.format("HH:mm")</h3>
                    <p>@dinner.description</p>
                    <p>@dinner.id Bestil inden @dinner.order_latest_time.format("HH:mm") fra <a target="_blank" href="@dinner.restaurant_link">@dinner.restaurant_name</a></p>
                } else {
                    <h3>@dinner.name @dinner.dinner_time.format("dd/MM-yyyy HH:mm")</h3>
                    <p>@dinner.description</p>
                    <p>Bestil inden @dinner.order_latest_time.format("dd/MM-yyyy HH:mm") fra <a target="_blank" href="@dinner.restaurant_link">@dinner.restaurant_name</a></p>
                }
                
                @if(!allOrders.get(dinner.id).isEmpty && allOrders.get(dinner.id).get.size > 0){
                    <table class="table table-bordered table-striped responsive-utilities">
                        <tr>
                            <th>Navn</th>
                            <th>Nr</th>
                            <th>Kommentar</th>
                        </tr>

                    @allOrders.get(dinner.id).get.map { order =>
                        <tr>
                            <td>@order.name</td>
                            <td>@order.food_number</td>
                            <td>@order.comment</td>
                        </tr>
                    }
                    </table>
                }
                @helper.form(routes.Application.addOrder(dinner.id), 'class -> "form-inline"){
                    @helper.inputText(orderForm("name"), '_label -> "Dit navn")
                    @helper.inputText(orderForm("food_number"), '_label -> "Nr")
                    @helper.inputText(orderForm("comment"), '_label -> "Kommentar")
                    <div class="controls">
                        <input type="submit" value="Bestil" class="btn btn-primary">
                    </div>
                }
    		</div>
    	}
        <a class="btn btn-primary" href="@routes.DinnerController.newDinner">Ny bestilling</a>	
    } else {
        <div class="hero-unit">
            <h1>Ingen bestillinger</h1>
            <p>Der er pt ingen bestillinger åbne. Er du sulten så opret en nu!</p>
            <a class="btn btn-primary btn-large" href="@routes.DinnerController.newDinner">
                Ny bestilling
            </a>
        </div>
    }
    
}